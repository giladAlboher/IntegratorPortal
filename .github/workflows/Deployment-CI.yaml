name: Deployment CI
on:
    # [ 'push', 'pull_request']
jobs:
    CI:
        runs-on: ubuntu-20.04
        name: CI    
        steps:
            - name: checkout
              uses: actions/checkout@v4
            
            - name: Set up QEMU
              uses: docker/setup-qemu-action@v2
            - name: Set up Docker Buildx
              uses: docker/setup-buildx-action@v2 
            - name: build docker image
              run: |
                docker build -t giladalboher/integratorportal:v1.0.${{ github.run_id }} .

            - name: Docker Login
              uses: docker/login-action@v2
              with:
                  username: ${{ secrets.DOCKER_USER }}
                  password: ${{ secrets.DOCKER_TOKEN }}
            - name: docker push
              run: |
                  docker push giladalboher/integratorportal:v1.0.${{ github.run_id }}
            